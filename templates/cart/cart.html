{% extends '_base.html' %}

{% load static %}

{% block content %}
  <div class="container mx-auto border-b border-slate-200">
    <div class="flex justify-between items-center p-4">
      <h1 class="font-semibold text-lg">Savat</h1>
      <button>
        <img src="{% static 'assets/icons/trash-2.svg' %}">
      </button>
    </div>
  </div>

  <div class="container mx-auto">
    <ul class="p-4">
      {% for item in cart %}
        <li class="border border-slate-200 rounded-xl p-2 relative">
          <button class="absolute top-2 right-2">
            <img src="{% static 'assets/icons/x.svg' %}" alt="X">
          </button>
          <div class="absolute bottom-2 right-2 flex items-center justify-between border rounded-3xl px-2 py-px">
            <button class="update-cart" data-product-id="{{ product.id }}" data-action="decrement">
              <img class="px-1" src="{% static 'assets/icons/minus.svg' %}" alt="Minus">
            </button>
            <span class="text-center font-medium mx-2" id="selected-quantity">
              {{ item.quantity|default:0 }} dona
            </span> <!-- if it is "optom", then show "kg" instead of "dona" -->
            <button class="update-cart" data-product-id="{{ product.id }}" data-action="increment">
              <img class="px-1" src="{% static 'assets/icons/plus.svg' %}" alt="Plus">
            </button>
          </div>
          <div class="flex">
            <img src="{{ item.product.image.url }}" class="max-w-24 mr-2">
            <div class="">
              <h2 class="mb-3">
                <span>{{ item.product.title }}</span>
                <span>{{ item.product.weight }} gr</span>
              </h2>
              <h1 class="mb-2 text-lg" data-value-type="price">{{ item.product.price }} UZS</h1>
              <a href="{% url 'product_detail' item.product.id %}" class="underline text-xs">Izoh</a>
            </div>
          </div>
        </li>
      {% endfor %}
    </ul>
  </div>

  <script>
    document.addEventListener('DOMContentLoaded', function() {
        var now = new Date();
        var dateTimeString = now.toLocaleDateString('en-US', { year: 'numeric', month: 'short', day: 'numeric' }) + ', ' + now.toLocaleTimeString('en-US', { hour: '2-digit', minute: '2-digit' });
        document.getElementById('datetime').innerText = dateTimeString;
    });
  </script>
{% endblock content %}
